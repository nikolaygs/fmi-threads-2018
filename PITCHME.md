## Многонишково програмиране с Java

---

### Съдържание

- Въведение
- Управление на нишки 
- Споделяне на ресурси 
- Комуникация между нишки 
- Преизползване на нишки 
- Атомарни променливи
- Конкурентни колекции

---

![Flux Explained](https://me.me/i/17324460)

---

### Какво е нишка?

Отделен път на изпълнение в програма, който се изпълнява асинхронно

---

### Асинхронно изпълнение
- Многозадачност
- Многонишковост

---

### Процеси и нишки


---
#### Ползи от многонишковото изпълнение
- Пълноценна употреба на наличните ресурси 
- Подобрено потребителско усещане
- Подобрен дизайн
---
#### Предизвикателства
- Сложност на кода
- Източник на грешки

---

## Управление на нишки

---

### Java + нишки
- управление на нишки – java.lang.Thread
- синхронизация при достъп – ключовата дума synchronized
- комуникация между нишки – Object.wait() / notify()

---

### Диспечер на нишки
- Java диспечер (green thread scheduler)
- Диспечър на ОС

---

### Дефиниране на нишка
- Всяка Java програма при стартирането си съдържа една нишка (main)
- За да създадем нова нишка в Java, наследяваме класа java.lang.Thread
- Инструкциите за изпълнение поставяме в метода run() който не връща резултат

@css[tip](Press the Space or Down key for a live demo.)

@fa[arrow-down]

@snap[south doclink]
See the [GitPitch Code Presenting Docs](https://gitpitch.com/docs/code-features) for further details.
@snapend

+++
@css[menu-title slide-title](Source: JavaScript Block)

```
public class CustomThread extends Thread { public void run() { System.out.println("Hello asynchronous world!"); } }
```

---

### Стартиране на нишка
За да стартираме нишка, трябва да:
- инстанцираме класа, представляващ нишка
- извикаме метода start() (който вътрешно ще извика run())

---

### Спиране на нишка
- Нишката прекратява изпълнението си автоматично след приключването на метода run()
- Нишката не може да бъде стартирана повторно!

---

### java.lang.Runnable
- Нишка може да бъде дефинирана и чрез интерфейса java.lang.Runnable
- За да стартираме нишката, подаваме инстанция на конкретния клас на java.lang.Thread
